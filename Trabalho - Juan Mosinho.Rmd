---
title: A Relação Entre a Taxa Selic e o ROE dos Bancos Brasileiros
author: "Juan Doudement Mosinho"
date: "2025-12-01"
output:
  pdf_document: null
  latex_engine: xelatex
  fig_caption: true
  keep_tex: false
  html_document:
    df_print: paged
---


```{r include=FALSE}
library(dplyr)
library(readr)
library(ggplot2)
library(janitor)
library(tidyr)
library(knitr)
library(rmarkdown)
library(kableExtra)
library(janitor)
```

## 1 - Introdução

#### Como parte da minha monografia em Ciências Econômicas pela UFPI, investigo a relação entre a variação da taxa SELIC e o desempenho dos principais bancos brasileiros, mensurado pelo ROE (Return on Equity). Para tal, é necessária uma análise empírica rigorosa. No trabalho completo, utilizo um modelo VAR (Vetor Autorregressivo) para estimar como o ROE dos bancos reage a um choque de 1 ponto percentual na taxa SELIC. Contudo, o presente PDF apresenta apenas a análise gráfica das relações examinadas ao longo do estudo.
.

## 2 - Metodologia

#### O ROE é importante porque mostra, de forma direta, quanto a instituição consegue gerar de retorno para cada 1 real de patrimônio líquido. Em outras palavras, um ROE de 15% indica que a cada R$ 1 de patrimônio, o banco gera R$ 0,15 de lucro líquido no período. O cálculo é feito com (Lucro Líquido/Patrimônio Líquido).

$$
\text{ROE} = \frac{\text{Lucro Líquido}}{\text{Patrimônio Líquido}}
$$

#### Os dados foram coletados por meio de web scraping no site [IF Data](https://www3.bcb.gov.br/ifdata/) do Banco Central, em trimestre, e tratados na linguagem R. Quanto à taxa SELIC, foi necessário convertê-la para frequência trimestral, já que sua atualização ocorre aproximadamente a cada 44/45 dias. Dessa forma, o valor utilizado para cada trimestre corresponde à taxa registrada no último dia do trimestre. Por exemplo, para o segundo trimestre de 2001, o valor da SELIC associado é o vigente em 30 de junho de 2001. 

#### No que se refere ao período selecionado, restringimos a análise ao século atual, por representar um intervalo de maior estabilidade econômica no país e por corresponder ao período posterior à consolidação do tripé macroeconômico.

```{r include=FALSE}
load("Juan_Trabalho.RData")
```

#### Para identificar os maiores bancos, realizei um filtro pelo Ativo Total, considerando as seis maiores instituições. Embora o objetivo inicial fosse selecionar apenas cinco, a CAIXA aparece duas vezes devido à alteração de seu código ao longo do período analisado. A literatura internacional recomenda o uso do Ativo Total como métrica para identificar as principais instituições financeiras, o que reforça a adequação desse critério.

```{r echo=FALSE}
Ativo_Total <- bind_rows(Ativo) %>%
  filter(TCB == "b1" & (TC == 1 | TC == 2)) %>%
  select(Instituição, Código, Data,Ativo.Total..k.....i.....j. , TCB)
Ativo_Total <- Ativo_Total %>%         
  rename(Ativo_Total = `Ativo.Total..k.....i.....j.`)
```

```{r eval=FALSE, include=FALSE}
AT_6 <- Ativo_Total %>%
  mutate(Ativo_Total = as.numeric(gsub("\\.", "", Ativo_Total))) %>%  
  filter(!is.na(Instituição)) %>%                                   
  group_by(TCB, Código, Instituição) %>%                             
  summarise(media_ativo = mean(Ativo_Total, na.rm = TRUE)) %>%      
  arrange(desc(media_ativo)) %>%
  head(6)
```

#### - Demonstração do Ativo Total das 5 maiores instituições financeiras. Os valores estão em bilhões.

```{r echo=TRUE}
kable(head(AT_6), 
      digits = 4, 
      col.names = c("TCB", "Código", "Data", "Média do Ativo total"),
      booktabs = TRUE ) %>% 
  kable_styling(
    full_width = FALSE,
    latex_options = c("striped", "HOLD_position") 
  )
```

## 3 - Apresentando o Patrimônio líquido e o Lucro Líquido

### 3.1 Filtrando o data frame do Passivo para encontrar o patrimônio líquido

```{r echo=TRUE, message=TRUE}
Patrimônio_Líquido <- bind_rows(Passivo)  %>%
  filter(TCB == "b1", Código %in% AT_6$Código) %>%
  dplyr::select(Instituição, Código, Data, `Patrimônio.Líquido..j.`) %>%
  rename(Patrimônio_Líquido = `Patrimônio.Líquido..j.`)
  Patrimônio_Líquido <- na.omit(Patrimônio_Líquido)
```

#### - Apresentando algumas linhas do df Patrimônio Líquido.


```{r}
kable(head(Patrimônio_Líquido), 
      digits = 4, 
      col.names = c("Instituição", "Código", "Data", "Patrimônio Líquido"),
      booktabs = TRUE ) %>% 
  kable_styling(
    full_width = FALSE,
    latex_options = c("striped", "HOLD_position") 
  )
```

### 3.2 Filtrando o data frame Demonstração de Resultado para encontrar o lucro líquido

```{r}
Demon_Resultado <- bind_rows(DRE)
Lucro_Líquido <- Demon_Resultado %>%
  filter(TCB == "b1" & Código %in% AT_6$Código) %>%  
  select(Instituição, Código, Data, `Lucro.Líquido..j.....g.....h.....i.`)
Lucro_Líquido <- Lucro_Líquido %>%         
  rename(
  Lucro_Líquido = `Lucro.Líquido..j.....g.....h.....i.`)
Lucro_Líquido <- na.omit(Lucro_Líquido)

```

#### - Apresentando algumas linhas do df Lucro Líquido

```{r}
kable(head(Lucro_Líquido), 
      digits = 4, 
      col.names = c("Instituição", "Código", "Data", "Lucro Líquido"),
      booktabs = TRUE ) %>% 
  kable_styling(
    full_width = FALSE,
    latex_options = c("striped", "HOLD_position") 
  )
```

## 4 - Representação gráfica da relação entre as duas variáveis

### 4.1 Organizando a taxa SELIC e alterando a data, estaremos incluindo o "01". Será feito para todos os data frames, eles estavam sendo tratados como trimestre.

#### Demonstrando os outliers da taxa Selic que irão aparecer mais abaixo.

```{r echo=FALSE}
kable(Taxa_SELIC_Trimestral[c(13,14,12,15), ]) %>%
  kableExtra::kable_styling(full_width = FALSE)
```


```{r include=FALSE}
SELIC_Simples <- Taxa_SELIC_Trimestral %>% 
  dplyr::select(Data, SELIC_Fim) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y")) 
```

### 4.2 Organizando o df do ROE do Banco do Brasil e juntando a taxa selic

```{r}
ROE_BB_Simples <- ROE_BB %>% 
  dplyr::select(Data, ROE) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y")) 

Dados_Simples_BB <- ROE_BB_Simples %>%
  left_join(SELIC_Simples, by = "Data") %>%
  na.omit()

Dados_Longos_SimplesBB <- Dados_Simples_BB %>%
  pivot_longer(
    cols = c(ROE, SELIC_Fim),
    names_to = "Variavel",
    values_to = "Valor")
```

#### - Apresentando alguns resultados do ROE do Banco do Brasil
```{r echo=FALSE}
kable(head(ROE_BB), 
      digits = 2, 
      col.names = c("Data", "Código", "Instituição", "ROE"),
      booktabs = TRUE ) %>% 
  kable_styling(full_width = FALSE,
    latex_options = c("striped", "HOLD_position"))
```

#### - Gráfico para verificar a relação entre as duas variáveis

```{r BB, fig.width=7, fig.height=5, fig.align='center'}
ggplot(data = Dados_Longos_SimplesBB, aes(x = Data, y = Valor, group = Variavel, color = Variavel)) +
  geom_line(linewidth = 1) +
  scale_color_manual(
    values = c(
      "ROE" = "darkgoldenrod",    
      "SELIC_Fim" = "green" )) +
  scale_x_date(
    date_breaks = "2 year",
    date_labels = "%Y") +
  labs(
    title = "ROE do Banco do Brasil Vs Taxa SELIC",
    x = "Ano",
    y = "Valor (%)",
    color = "Serie") +
  theme_classic()
```


#### - O ROE do Banco do Brasil tem uma forte queda no primeiro trimestre de 2007, após um período de forte crescimento no início dos anos 2000. Outro ponto relevante aparece entre meados de 2019 e o final de 2021, quando o ROE supera a taxa SELIC. Isso não significa, necessariamente, mérito exclusivo dos bancos, parte desse comportamento se explica pela redução da SELIC a níveis historicamente mínimos em 2019 e 2020.

### 4.3 Organizando o df do ROE do BRADESCO e juntando a taxa SELIC

```{r}
ROE_BRADESCO_Simples <- ROE_BRADESCO %>% 
  dplyr::select(Data, ROE) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y"))

Dados_Simples_BRADESCO <- ROE_BRADESCO_Simples %>%
  left_join(SELIC_Simples, by = "Data") %>%
  na.omit()

Dados_Longos_Simples_BRADESCO <- Dados_Simples_BRADESCO %>%
  pivot_longer(
    cols = c(ROE, SELIC_Fim),
    names_to = "Variavel",
    values_to = "Valor")
```

#### - Apresentando alguns resultados do ROE Bradesco

```{r echo=FALSE}
kable(head(ROE_BRADESCO), 
      digits = 2, 
      col.names = c("Data", "Código", "Instituição", "ROE"),
      booktabs = TRUE ) %>% 
  kable_styling(full_width = FALSE,
    latex_options = c("striped", "HOLD_position"))
```


#### - Gráfico para verificar a relação entre as duas variáveis:

```{r Bradesco, fig.width=7, fig.height=5, fig.align='center'}

ggplot(data = Dados_Longos_Simples_BRADESCO, aes(x = Data, y = Valor, group = 
  Variavel, color = Variavel)) +
  geom_line(linewidth = 1) +
  scale_color_manual(
    values = c(
      "ROE" = "red",   
      "SELIC_Fim" = "green" )) +
  scale_x_date(
    date_breaks = "2 year",
    date_labels = "%Y") +
  labs(
    title = "ROE da Bradesco Vs Taxa SELIC",
    x = "Ano",
    y = "Valor (%)",
    color = "Serie") +
  theme_classic()
```

#### - O gráfico mostra que o ROE do Bradesco oscila bastante ao longo do tempo, mantendo-se geralmente entre 5% e 15%. Há uma queda mais forte no segundo semestre de 2006, influenciada pela crise financeira e por ajustes internos do banco. Entre 2019 e 2022, mesmo com a SELIC em níveis historicamente baixos, o ROE permanece acima da taxa básica de juros. Já a partir de 2021, a SELIC sobe rapidamente, mas o ROE não acompanha esse movimento. 

### 4.4 Organizando o df do ROE do ITAÚ e juntando a taxa SELIC

```{r}

ROE_ITAU_Simples <- ROE_ITAU %>% 
  dplyr::select(Data, ROE) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y"))

Dados_Simples_ITAU <- ROE_ITAU_Simples %>%
  left_join(SELIC_Simples, by = "Data") %>%
  na.omit()

Dados_Longos_Simples_ITAU <- Dados_Simples_ITAU %>%
  pivot_longer(
    cols = c(ROE, SELIC_Fim),
    names_to = "Variavel",
    values_to = "Valor")

```

#### - Apresentando alguns resultados do Itaú

```{r echo=FALSE}
kable(head(ROE_ITAU), 
      digits = 2, 
      col.names = c("Data", "Código", "Instituição", "ROE"),
      booktabs = TRUE ) %>% 
  kable_styling(full_width = FALSE,
    latex_options = c("striped", "HOLD_position"))
```


#### - Gráfico para verificar a relação entre as duas variáveis:

```{r Itaú, fig.width=7, fig.height=5, fig.align='center'}

ggplot(data = Dados_Longos_Simples_ITAU, aes(x = Data, y = Valor,
 group = Variavel, color = Variavel)) +
  geom_line(linewidth = 1) +
  scale_color_manual(
    values = c(
      "ROE" = "orange",   
      "SELIC_Fim" = "green" )) +
  scale_x_date(
    date_breaks = "2 year",
    date_labels = "%Y") +
  labs(
    title = "ROE do Itau Vs Taxa SELIC",
    x = "Ano",
    y = "Valor (%)",
    color = "Serie") +
  theme_classic()
```

#### - O ROE do Itaú apresenta seu melhor desempenho no início dos anos 2000, mas passa por uma queda acentuada no primeiro semestre de 2007, período marcado por turbulências no sistema financeiro. Ao longo da série, o ROE se estabiliza em torno de 8% a 12%, com oscilações trimestrais típicas da atividade bancária.


#### - Demonstração do outlier

```{r echo=FALSE}
kable(ROE_ITAU[(8),]) %>%
  kableExtra::kable_styling(full_width = FALSE)
```

### 4.5 Organizando o df do ROE do SANTANDER e juntando a taxa SELIC

```{r}
ROE_SANTANDER_Simples <- ROE_SANTANDER %>% 
  dplyr::select(Data, ROE) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y"))

Dados_Simples_SANTANDER <- ROE_SANTANDER_Simples %>%
  left_join(SELIC_Simples, by = "Data") %>%
  na.omit()

Dados_Longos_Simples_SANTANDER <- Dados_Simples_SANTANDER %>%
  pivot_longer(
    cols = c(ROE, SELIC_Fim), 
    names_to = "variavel",
    values_to = "Valor")
```

#### - Apresentando alguns resultados do ROE do Santander

```{r echo=FALSE}
kable(head(ROE_SANTANDER), 
      digits = 2, 
      col.names = c("Data", "Código", "Instituição", "ROE"),
      booktabs = TRUE ) %>% 
  kable_styling(full_width = FALSE,
    latex_options = c("striped", "HOLD_position"))
```

#### - Gráfico para verificar a relação entre as duas variáveis:

```{r Santander, fig.width=7, fig.height=5, fig.align='center'}
ggplot(data = Dados_Longos_Simples_SANTANDER, 
       aes(x = Data, y = Valor, group = variavel, color = variavel)) +
  geom_line(linewidth = 1) +
  scale_color_manual(
    values = c(
      "ROE" = "red",   
      "SELIC_Fim" = "green" )) +
  scale_x_date(
    date_breaks = "2 year",
    date_labels = "%Y") +
  labs(
      title = "ROE do Santander Vs Taxa SELIC", 
    x = "Ano",
    y = "Valor (%)",
    color = "Serie") +
 theme_classic()

```

#### - O gráfico do Santander apresenta um comportamento atípico no início dos anos 2000, quando o ROE despenca para valores extremamente negativos devido ao prejuízo gerado durante a incorporação do Banespa, que reduziu fortemente o patrimônio líquido do banco (segundo consta em alguma notícias). Após esse episódio isolado, o ROE se estabiliza em torno de níveis próximos a 5%–10%, com oscilações moderadas ao longo do tempo. A partir de 2016/17, o desempenho acompanha um padrão mais regular, sem desvios extremos.

#### - Demonstração do outlier

```{r echo=FALSE}
kable(ROE_SANTANDER[(27), ]) %>%
  kableExtra::kable_styling(full_width = FALSE)
```

### 4.6 Organizando o df do ROE do CAIXA e juntando a taxa SELIC

```{r}
ROE_CAIXA_Simples <- ROE_CAIXA %>% 
  dplyr::select(Data, ROE) %>%
  mutate(Data = as.Date(paste0("01/", Data), format = "%d/%m/%Y"))

Dados_Simples_CAIXA <- ROE_CAIXA_Simples %>%
  left_join(SELIC_Simples, by = "Data") %>% na.omit()

Dados_Longos_Simples_CAIXA <- Dados_Simples_CAIXA %>%
  pivot_longer(
    cols = c(ROE, SELIC_Fim),
    names_to = "Variavel",
    values_to = "Valor")
```

##### - Apresentando alguns resultados do ROE

```{r echo=FALSE}
kable(head(ROE_CAIXA), 
      digits = 2, 
      col.names = c("Data", "Código", "Instituição", "ROE"),
      booktabs = TRUE ) %>% 
  kable_styling(full_width = FALSE,
    latex_options = c("striped", "HOLD_position"))
```

#### - Gráfico para verificar a relação entre as duas variáveis:

```{r Caixa, fig.width=7, fig.height=5, fig.align='center'}
ggplot(data = Dados_Longos_Simples_CAIXA, aes(x = Data, y = Valor, group = 
  Variavel, color = Variavel)) +
  geom_line(linewidth = 1) +
  scale_color_manual(
    values = c(
      "ROE" = "blue",   
      "SELIC_Fim" = "green" )) +
  scale_x_date(
    date_breaks = "2 year",
    date_labels = "%Y") +
  labs(
    title = "ROE da Caixa Economica Federal Vs Taxa SELIC",
    x = "Ano",
    y = "Valor (%)",
    color = "Serie") +
  theme_classic()

```

#### - O gráfico da Caixa mostra um ROE extremamente negativo no início dos anos 2000, refletindo um episódio de forte prejuízo, amplamente associado a problemas de gestão e provisões elevadas naquele período. Após esse outlier, o indicador se estabiliza rapidamente e passa a oscilar em torno de valores moderados, geralmente entre 5% e 10%.

#### - Demonstração do outlier


```{r echo=FALSE}
kable(ROE_CAIXA[(27), ]) %>%
  kableExtra::kable_styling(full_width = FALSE)
```

## 5 - Conclusão

#### Os bancos, na maior parte do tempo, apresentam retornos inferiores à taxa SELIC, o que é esperado, já que a taxa básica de juros serve como referência para a precificação e indexação de grande parte dos contratos do mercado. Ainda assim, é essencial analisar como as oscilações de uma variável se comportam em relação às mudanças da outra. Esse é justamente o objetivo do meu trabalho: explorar essa dinâmica, identificar padrões e investigar até que ponto uma alteração na SELIC pode influenciar o ROE no período seguinte.

## 6 - Referencial Teórico

#### NACEUR, Samy Ben. The determinants of commercial bank interest margin and profitability: evidence from Tunisia. Frontiers in Finance and Economics, v. 5, n. 1, p. 106–130, 2003.
